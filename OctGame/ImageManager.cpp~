#include "ImageManager.hpp"

/// <summary>Load image and add imageList.</summary>
int ImageManager::loadImage(string filepath, bool isBmp) {
    cv::Mat* img;

    this->imageList.push_back(cv::imread(filepath, cv::IMREAD_UNCHANGED));
    if(isBmp) {
        img = &this->imageList[this->imageList.size() - 1];
        cv::cvtColor(*img, *img, cv::COLOR_BGRA2RGBA);
    }

    return this->imageList.size() - 1;
}

int ImageManager::loadImage(string filepath, int width, int height, bool isBmp) {
    int handle = this->loadImage(filepath, isBmp);
    cv::Mat* img = &this->imageList[handle];

    cv::resize(*img, *img, cv::Size(), (float)width / img->cols, (float)height / img->rows);

    return handle;
}

cv::Mat* ImageManager::getImage(int handle) {
    if(handle >= imageList.size()) {
        return nullptr;
    }

    return this->imageList[handle];
}
